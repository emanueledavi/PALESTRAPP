// src/data/dietIngredientsMap.js

// Questo dizionario mappa i nomi dei piatti (normalizzati in minuscolo)
// a un array di ingredienti (normalizzati in minuscolo),
// ora categorizzato per tipo di pasto e ingredienti comuni.
const categorizedDietIngredientsMap = {
  // Colazione e Spuntini Mattutini
  colazione: {
    "latte e biscotti": ["latte", "biscotti"],
    "yogurt con frutta": ["yogurt bianco", "frutta fresca", "muesli"],
    "pane tostato con marmellata": ["pane in cassetta", "marmellata", "burro"],
    "frullato di frutta": ["frutta mista", "latte", "yogurt"],
    "cappuccino e cornetto": ["caffè", "latte", "cornetto"],
    "cereali con latte": ["cereali", "latte"],
    "toast con avocado e uovo": ["pane tostato", "avocado", "uova", "sale", "pepe"],
    "pancake con sciroppo d'acero": ["farina", "uova", "latte", "lievito per dolci", "sciroppo d'acero", "burro"],
    "porridge d'avena": ["fiocchi d'avena", "latte", "acqua", "frutta secca", "miele"],
    "centrifuga di frutta e verdura": ["frutta mista", "verdura mista", "acqua"],
    "fette biscottate con miele": ["fette biscottate", "miele"],
    "spremuta d'arancia": ["arance"],
    "uova strapazzate": ["uova", "latte", "burro", "sale", "pepe"],
    "pane e olio": ["pane", "olio d'oliva"],
    "budino di chia": ["semi di chia", "latte vegetale", "frutta fresca", "miele"],
    "toast con burro d'arachidi e banana": ["pane tostato", "burro d'arachidi", "banana"],
    "macedonia di frutta": ["frutta mista"],
  },
  spuntinoMattutino: { // Specifico per spuntini mattutini
    "frutta fresca": ["frutta fresca"],
    "barretta energetica": ["barretta energetica"],
    "frutta secca": ["frutta secca"],
    "gallette di riso": ["gallette di riso"],
    "yogurt": ["yogurt"],
    "mela": ["mela"],
    "banana": ["banana"],
    "arancia": ["arancia"],
    "kiwi": ["kiwi"],
    "pera": ["pera"],
    "pesca": ["pesca"],
    "uva": ["uva"],
    "fragole": ["fragole"],
    "ciliegie": ["ciliegie"],
    "pane": ["pane"],
    "prosciutto": ["prosciutto"],
    "formaggio": ["formaggio"],
    "mandorle": ["mandorle"],
    "noci": ["noci"],
    "cracker integrali": ["cracker integrali"],
  },
  spuntinoPomeridiano: { // Specifico per spuntini pomeridiani
    "frutta fresca": ["frutta fresca"],
    "barretta energetica": ["barretta energetica"],
    "frutta secca": ["frutta secca"],
    "gallette di riso": ["gallette di riso"],
    "yogurt": ["yogurt"],
    "mela": ["mela"],
    "banana": ["banana"],
    "arancia": ["arancia"],
    "kiwi": ["kiwi"],
    "pera": ["pera"],
    "pesca": ["pesca"],
    "uva": ["uva"],
    "fragole": ["fragole"],
    "ciliegie": ["ciliegie"],
    "pane": ["pane"],
    "prosciutto": ["prosciutto"],
    "formaggio": ["formaggio"],
    "mandorle": ["mandorle"],
    "noci": ["noci"],
    "cracker integrali": ["cracker integrali"],
  },

  // Primi Piatti (Pranzo/Cena)
  pranzo: {
    "pasta al pomodoro": ["pasta", "pomodoro pelato", "passata di pomodoro", "basilico", "cipolla", "olio d'oliva", "sale", "aglio"],
    "pasta alla carbonara": ["pasta", "guanciale", "pecorino romano", "uova", "pepe nero"],
    "pasta al pesto": ["pasta", "pesto", "pinoli", "basilico", "parmigiano reggiano", "aglio", "olio d'oliva"],
    "ragu alla bolognese": ["carne macinata di manzo", "carne macinata di maiale", "passata di pomodoro", "cipolla", "carote", "sedano", "vino rosso", "brodo vegetale", "olio d'oliva", "sale", "pepe"],
    "lasagne al forno": ["sfoglie per lasagne", "ragu alla bolognese", "besciamella", "parmigiano reggiano", "mozzarella", "sale", "pepe"],
    "risotto ai funghi": ["riso carnaroli", "funghi porcini", "brodo vegetale", "cipolla", "parmigiano reggiano", "burro", "vino bianco", "olio d'oliva", "prezzemolo"],
    "minestrone": ["carote", "sedano", "cipolla", "patate", "zucchine", "fagioli", "piselli", "pomodoro", "brodo vegetale", "pasta corta", "olio d'oliva", "sale", "pepe"],
    "amatriciana": ["pasta", "guanciale", "pecorino romano", "pomodoro pelato", "peperoncino", "vino bianco", "olio d'oliva", "sale", "pepe"],
    "cacio e pepe": ["pasta", "pecorino romano", "pepe nero"],
    "gricia": ["pasta", "guanciale", "pecorino romano", "pepe nero"],
    "carbonara di zucchine": ["pasta", "zucchine", "uova", "parmigiano reggiano", "guanciale", "pepe nero", "olio d'oliva"],
    "pasta e fagioli": ["pasta", "fagioli borlotti", "pomodoro", "pancetta", "cipolla", "carote", "sedano", "aglio", "brodo vegetale", "olio d'oliva", "sale", "pepe"],
    "pasta con le sarde": ["pasta", "sarde fresche", "finocchietto selvatico", "uvetta", "pinoli", "zafferano", "cipolla", "olio d'oliva", "sale", "pepe"],
    "orecchiette con cime di rapa": ["orecchiette", "cime di rapa", "aglio", "peperoncino", "acciughe sott'olio", "olio d'oliva", "sale"],
    "pasta alla norma": ["pasta", "melanzane", "ricotta salata", "pomodoro pelato", "basilico", "aglio", "olio d'oliva", "sale"],
    "risotto alla milanese": ["riso carnaroli", "zafferano", "brodo di carne", "cipolla", "midollo di bue", "parmigiano reggiano", "burro", "vino bianco", "sale"],
    "risotto alla pescatora": ["riso carnaroli", "frutti di mare misti", "pomodorini", "aglio", "prezzemolo", "vino bianco", "brodo di pesce", "olio d'oliva", "sale", "pepe"],
    "gnocchi al pesto": ["gnocchi di patate", "pesto", "fagiolini", "patate"],
    "tortellini in brodo": ["tortellini", "brodo di carne", "parmigiano reggiano"],
    "pappa al pomodoro": ["pane toscano raffermo", "pomodoro pelato", "aglio", "basilico", "brodo vegetale", "olio d'oliva", "sale", "pepe"],
    "ribollita": ["pane toscano raffermo", "cavolo nero", "fagioli cannellini", "verza", "cipolla", "carote", "sedano", "pomodoro", "brodo vegetale", "olio d'oliva", "sale", "pepe"],
    "pasta e patate": ["pasta", "patate", "pomodoro", "pancetta", "cipolla", "olio d'oliva", "sale", "pepe"],
    "vellutata di zucca": ["zucca", "patate", "cipolla", "brodo vegetale", "olio d'oliva", "sale", "pepe", "panna da cucina"],
    "zuppa di lenticchie": ["lenticchie", "carote", "sedano", "cipolla", "pomodoro", "brodo vegetale", "olio d'oliva", "sale", "pepe"],
    "pasta al forno": ["pasta", "salsa di pomodoro", "mozzarella", "prosciutto cotto", "uova sode", "parmigiano reggiano", "besciamella", "olio d'oliva", "sale", "pepe"],
    "insalata di riso": ["riso", "prosciutto cotto", "formaggio", "piselli", "carote", "mais", "sottaceti", "olio d'oliva", "sale"],
    "couscous con verdure": ["couscous", "zucchine", "melanzane", "peperoni", "pomodorini", "cipolla", "brodo vegetale", "olio d'oliva", "menta", "prezzemolo"],
    "farro con verdure e legumi": ["farro", "lenticchie", "ceci", "carote", "zucchine", "pomodorini", "olio d'oliva", "basilico"],
    "pizza margherita": ["farina", "acqua", "lievito di birra", "sale", "passata di pomodoro", "mozzarella", "basilico", "olio d'oliva"],
    "pizza diavola": ["farina", "acqua", "lievito di birra", "sale", "passata di pomodoro", "mozzarella", "salame piccante", "olio d'oliva"],
  },
  cena: {
    "pollo al forno con patate": ["pollo intero", "patate", "rosmarino", "aglio", "olio d'oliva", "sale", "pepe"],
    "bistecca": ["bistecca di manzo", "olio d'oliva", "sale grosso", "rosmarino"],
    "polpette al sugo": ["carne macinata", "uova", "pane raffermo", "latte", "parmigiano reggiano", "salsa di pomodoro", "cipolla", "olio d'oliva", "sale", "pepe"],
    "ossobuco alla milanese": ["ossobuco di vitello", "cipolla", "carote", "sedano", "vino bianco", "brodo di carne", "buccia di limone", "prezzemolo", "aglio", "burro", "farina", "sale", "pepe"],
    "saltimbocca alla romana": ["fettine di vitello", "prosciutto crudo", "salvia", "vino bianco", "burro", "sale", "pepe"],
    "cotoletta alla milanese": ["fettine di vitello", "uova", "pangrattato", "burro", "sale", "limone"],
    "brasato al barolo": ["carne di manzo per brasato", "barolo", "cipolla", "carote", "sedano", "aglio", "rosmarino", "alloro", "chiodi di garofano", "brodo di carne", "olio d'oliva", "sale", "pepe"],
    "spezzatino con patate": ["carne di manzo per spezzatino", "patate", "cipolla", "carote", "sedano", "piselli", "passata di pomodoro", "vino rosso", "brodo vegetale", "olio d'oliva", "sale", "pepe"],
    "polpo con patate": ["polpo", "patate", "prezzemolo", "aglio", "limone", "olio d'oliva", "sale", "pepe"],
    "salsiccia e friarielli": ["salsiccia di maiale", "friarielli", "aglio", "peperoncino", "olio d'oliva", "sale"],
    "involtini di carne": ["fettine di manzo", "prosciutto cotto", "formaggio", "uova", "pangrattato", "salsa di pomodoro", "cipolla", "olio d'oliva", "sale", "pepe"],
    "coniglio alla cacciatora": ["coniglio", "pomodoro pelato", "olive nere", "capperi", "cipolla", "aglio", "rosmarino", "vino bianco", "brodo vegetale", "olio d'oliva", "sale", "pepe"],
    "trippa alla romana": ["trippa di bovino", "salsa di pomodoro", "menta romana", "pecorino romano", "cipolla", "carote", "sedano", "vino bianco", "olio d'oliva", "sale", "pepe"],
    "fegato alla veneziana": ["fegato di vitello", "cipolla", "burro", "vino bianco", "prezzemolo", "sale", "pepe"],
    "parmigiana di zucchine": ["zucchine", "salsa di pomodoro", "mozzarella", "parmigiano reggiano", "basilico", "uova", "farina", "olio per friggere", "sale", "pepe"],
    "salmone al forno": ["filetto di salmone", "limone", "olio d'oliva", "sale", "pepe", "aneto"],
    "orata al cartoccio": ["orata", "pomodorini", "olive taggiasche", "capperi", "prezzemolo", "limone", "olio d'oliva", "sale", "pepe"],
    "fritto misto di pesce": ["gamberi", "calamari", "acciughe", "farina", "olio per friggere", "limone", "sale"],
    "baccala alla livornese": ["baccalà", "pomodoro pelato", "cipolla", "aglio", "prezzemolo", "vino bianco", "olive nere", "capperi", "olio d'oliva", "sale", "pepe"],
    "spigola al sale": ["spigola", "sale grosso", "rosmarino", "limone"],
    "gamberi al vapore": ["gamberi", "limone", "prezzemolo", "olio d'oliva"],
    "sardine alla griglia": ["sardine fresche", "olio d'oliva", "sale", "pepe", "limone"],
    "insalata mista": ["lattuga", "pomodori", "cetrioli", "carote", "olio d'oliva", "aceto", "sale"],
    "verdure grigliate": ["zucchine", "melanzane", "peperoni", "olio d'oliva", "sale", "origano"],
    "spinaci saltati": ["spinaci freschi", "aglio", "olio d'oliva", "sale"],
    "caponata siciliana": ["melanzane", "sedano", "cipolla", "pomodoro", "olive verdi", "capperi", "aceto di vino bianco", "zucchero", "olio d'oliva", "basilico", "sale", "pepe"],
    "patate al forno": ["patate", "rosmarino", "olio d'oliva", "sale", "pepe"],
    "broccoli saltati": ["broccoli", "aglio", "olio d'oliva", "peperoncino", "sale"],
    "carciofi alla romana": ["carciofi", "mentuccia", "aglio", "olio d'oliva", "limone", "sale", "pepe"],
    "fagiolini al pomodoro": ["fagiolini", "pomodoro", "aglio", "basilico", "olio d'oliva", "sale", "pepe"],
    "polenta con funghi": ["farina di mais", "funghi misti", "aglio", "prezzemolo", "brodo vegetale", "olio d'oliva", "sale", "pepe"],
    "frittata di verdure": ["uova", "verdure miste", "formaggio grattugiato", "olio d'oliva", "sale", "pepe"],
    "burger di ceci": ["ceci", "pangrattato", "cipolla", "carote", "prezzemolo", "spezie", "olio d'oliva", "pane per burger", "lattuga", "pomodoro"],
    "zuppa di pesce": ["frutti di mare misti", "pomodoro", "aglio", "prezzemolo", "vino bianco", "brodo di pesce", "olio d'oliva", "pane tostato", "sale", "pepe"],
    "polpette di lenticchie": ["lenticchie", "pangrattato", "cipolla", "carote", "prezzemolo", "spezie", "olio d'oliva"],
  },
  // Dolci e Dessert
  dolci: {
    "tiramisu": ["savoiardi", "mascarpone", "uova", "caffè", "zucchero", "cacao amaro"],
    "panna cotta": ["panna fresca", "zucchero", "colla di pesce", "vaniglia", "salsa ai frutti di bosco"],
    "crostata di frutta": ["farina", "burro", "zucchero", "uova", "frutta fresca", "crema pasticcera", "gelatina per dolci"],
    "profiteroles": ["bignè", "crema chantilly", "cioccolato fondente", "panna fresca"],
    "babà al rum": ["farina", "uova", "burro", "zucchero", "lievito di birra", "rum", "sciroppo di zucchero"],
    "cannoli siciliani": ["farina", "zucchero", "strutto", "vino bianco", "ricotta di pecora", "canditi", "gocce di cioccolato", "pistacchio tritato", "olio per friggere"],
    "cheesecake ai frutti di bosco": ["biscotti secchi", "burro fuso", "formaggio spalmabile", "panna fresca", "zucchero a velo", "frutti di bosco", "gelatina"],
    "muffin al cioccolato": ["farina", "zucchero", "cacao amaro", "lievito per dolci", "uova", "latte", "olio di semi", "gocce di cioccolato"],
    "tortino al cioccolato con cuore morbido": ["cioccolato fondente", "burro", "uova", "zucchero", "farina"],
    "crema catalana": ["latte", "tuorli d'uovo", "zucchero", "amido di mais", "scorza di limone", "cannella"],
  },
  // Ingredienti comuni per la colazione/spuntini che non sono ricette complete
  common_breakfast_ingredients: {
    "mela": ["mela"], "banana": ["banana"], "arancia": ["arancia"], "kiwi": ["kiwi"], "pera": ["pera"],
    "pesca": ["pesca"], "uva": ["uva"], "fragole": ["fragole"], "ciliegie": ["ciliegie"],
    "pane": ["pane"], "latte": ["latte"], "yogurt": ["yogurt"], "uova": ["uova"],
    "miele": ["miele"], "caffè": ["caffè"], "zucchero": ["zucchero"], "burro": ["burro"],
    "fette biscottate": ["fette biscottate"], "cereali": ["cereali"], "muesli": ["muesli"],
    "fiocchi d'avena": ["fiocchi d'avena"], "latte vegetale": ["latte vegetale"],
    "barretta energetica": ["barretta energetica"], "gallette di riso": ["gallette di riso"],
    "semi di chia": ["semi di chia"], "acqua": ["acqua"],
    "prosciutto cotto": ["prosciutto cotto"],
    "formaggio": ["formaggio"],
    "burro d'arachidi": ["burro d'arachidi"],
    "mandorle": ["mandorle"],
    "noci": ["noci"],
    "cracker integrali": ["cracker integrali"],
  },
  // Ingredienti comuni per piatti salati (pranzo/cena) che non sono ricette complete
  common_savory_ingredients: {
    "sale": ["sale"], "pepe": ["pepe"], "olio d'oliva": ["olio d'oliva"], "aceto": ["aceto"],
    "cipolla": ["cipolla"], "aglio": ["aglio"], "pomodoro": ["pomodoro"], "patate": ["patate"],
    "zucchine": ["zucchine"], "melanzane": ["melanzane"], "peperoni": ["peperoni"],
    "carote": ["carote"], "sedano": ["sedano"], "lattuga": ["lattuga"], "spinaci freschi": ["spinaci freschi"],
    "broccoli": ["broccoli"], "cavolfiore": ["cavolfiore"], "funghi": ["funghi"], "limone": ["limone"],
    "basilico": ["basilico"], "rosmarino": ["rosmarino"], "origano": ["origano"], "prezzemolo": ["prezzemolo"],
    "aneto": ["aneto"], "salvia": ["salvia"], "alloro": ["alloro"], "chiodi di garofano": ["chiodi di garofano"],
    "mentuccia": ["mentuccia"], "peperoncino": ["peperoncino"], "olive taggiasche": ["olive taggiasche"],
    "olive verdi": ["olive verdi"], "olive nere": ["olive nere"], "capperi": ["capperi"], "pinoli": ["pinoli"],
    "uvetta": ["uvetta"], "vino bianco": ["vino bianco"], "vino rosso": ["vino rosso"], "rum": ["rum"],
    "sciroppo d'acero": ["sciroppo d'acero"], "cacao amaro": ["cacao amaro"],
    "savoiardi": ["savoiardi"], "mascarpone": ["mascarpone"], "panna fresca": ["panna fresca"],
    "colla di pesce": ["colla di pesce"], "vaniglia": ["vaniglia"], "salsa ai frutti di bosco": ["salsa ai frutti di bosco"],
    "bignè": ["bignè"], "crema chantilly": ["crema chantilly"], "cioccolato fondente": ["cioccolato fondente"],
    "zucca": ["zucca"], "cavolo nero": ["cavolo nero"], "verza": ["verza"], "pane toscano raffermo": ["pane toscano raffermo"],
    "sarde fresche": ["sarde fresche"], "finocchietto selvatico": ["finocchietto selvatico"],
    "acciughe sott'olio": ["acciughe sott'olio"], "midollo di bue": ["midollo di bue"],
    "friarielli": ["friarielli"], "pistacchio tritato": ["pistacchio tritato"], "canditi": ["canditi"],
    "gocce di cioccolato": ["gocce di cioccolato"], "strutto": ["strutto"],
    "gelatina per dolci": ["gelatina per dolci"], "crema pasticcera": ["crema pasticcera"],
    "fagioli borlotti": ["fagioli borlotti"], "fagioli cannellini": ["fagioli cannellini"],
    "lenticchie in scatola": ["lenticchie in scatola"], "piselli in scatola": ["piselli in scatola"],
    "ceci in scatola": ["ceci in scatola"], "riso carnaroli": ["riso carnaroli"],
    "orecchiette": ["orecchiette"], "gnocchi di patate": ["gnocchi di patate"],
    "tortellini": ["tortellini"], "sfoglie per lasagne": ["sfoglie per lasagne"],
    "salsa di pomodoro": ["salsa di pomodoro"], "passata di pomodoro": ["passata di pomodoro"],
    "pomodoro pelato": ["pomodoro pelato"], "pesto": ["pesto"], "besciamella": ["besciamella"],
    "brodo vegetale": ["brodo vegetale"], "brodo di carne": ["brodo di carne"], "brodo di pesce": ["brodo di pesce"],
    "olio per friggere": ["olio per friggere"], "sale grosso": ["sale grosso"],
    "prosciutto": ["prosciutto"], "guanciale": ["guanciale"], "pancetta": ["pancetta"],
    "salsiccia di maiale": ["salsiccia di maiale"], "carne macinata": ["carne macinata"],
    "carne macinata di manzo": ["carne macinata di manzo"], "carne macinata di maiale": ["carne macinata di maiale"],
    "pollo": ["pollo"], "pollo intero": ["pollo intero"], "manzo": ["manzo"],
    "bistecca di manzo": ["bistecca di manzo"], "carne di manzo per brasato": ["carne di manzo per brasato"],
    "carne di manzo per spezzatino": ["carne di manzo per spezzatino"], "vitello": ["vitello"],
    "fettine di vitello": ["fettine di vitello"], "ossobuco di vitello": ["ossobuco di vitello"],
    "coniglio": ["coniglio"], "fegato di vitello": ["fegato di vitello"], "trippa di bovino": ["trippa di bovino"],
    "salmone": ["salmone"], "filetto di salmone": ["filetto di salmone"], "tonno": ["tonno in scatola"],
    "orata": ["orata"], "spigola": ["spigola"], "gamberi": ["gamberi"], "calamari": ["calamari"],
    "acciughe": ["acciughe"], "baccalà": ["baccalà"], "polpo": ["polpo"],
    "frutti di mare misti": ["frutti di mare misti"], "pasta": ["pasta"], "riso": ["riso"],
    "farina di mais": ["farina di mais"], "spezie": ["spezie"], "pane per burger": ["pane per burger"],
    "formaggio grattugiato": ["formaggio grattugiato"], "olio di semi": ["olio di semi"],
    "biscotti secchi": ["biscotti secchi"], "burro fuso": ["burro fuso"], "formaggio spalmabile": ["formaggio spalmabile"],
    "zucchero a velo": ["zucchero a velo"], "gelatina": ["gelatina"],
  }
};

// Funzione helper per normalizzare il testo (minuscolo, senza spazi extra)
const normalizeText = (text) => {
  return text.toLowerCase().replace(/\s+/g, ' ').trim();
};

// Funzione per ottenere gli ingredienti da un alimento/piatto
// Questa funzione ora cerca in tutte le categorie per la spesa
export const getIngredientsForFood = (foodName) => {
  const normalizedFoodName = normalizeText(foodName);
  // Cerca in tutte le categorie principali e nelle categorie comuni
  const allCategories = [
    categorizedDietIngredientsMap.colazione,
    categorizedDietIngredientsMap.spuntinoMattutino,
    categorizedDietIngredientsMap.spuntinoPomeridiano,
    categorizedDietIngredientsMap.pranzo,
    categorizedDietIngredientsMap.cena,
    categorizedDietIngredientsMap.dolci,
    categorizedDietIngredientsMap.common_breakfast_ingredients,
    categorizedDietIngredientsMap.common_savory_ingredients,
  ];

  for (const categoryMap of allCategories) {
    if (categoryMap && categoryMap[normalizedFoodName]) {
      return categoryMap[normalizedFoodName];
    }
  }
  // Se non trovato in nessuna ricetta/ingrediente specifico, restituisce l'alimento stesso
  return [normalizedFoodName];
};

// Esporta un oggetto contenente tutte le funzioni e il dizionario categorizzato
const DietUtils = {
  dietIngredientsMap: categorizedDietIngredientsMap, // Esporta il dizionario categorizzato
  normalizeText,
  getIngredientsForFood,
};

export default DietUtils;
